<h1>Blockchain-based Polling System</h1>
<h2>List of existing polls</h2>
<p>You need to provide a valid admin password to be able to see the list of all blockchains in the system.</p>

<div>
  <mat-form-field appearance="outline">
    <mat-label>Admin Password</mat-label>
    <input type="password" [(ngModel)]="adminPassword" #adminPasswordInput="ngModel" required matInput
      minlength="5" />
    <mat-error *ngIf="adminPasswordInput.invalid">Please enter a valid password.</mat-error>
  </mat-form-field>
</div>
<button mat-raised-button color="primary" [disabled]="adminPasswordInput.invalid"  (click)="getPolls()">Query Polls</button>
<a mat-stroked-button routerLink="/poll/new">Create new poll</a>
<br/>
<div *ngIf="errorMessage" class="alert alert-danger" role="alert">{{errorMessage}}</div>

<table>
  <thead>
    <tr>
      <th>Position</th>
      <th>Poll Id</th>
      <th>Poll Name</th>
      <th>Register link</th>
      <th>Vote link</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let poll of polls;let i = index;">
      <td>{{i}}.</td>
      <td>{{poll.id}}</td>
      <td>{{poll.name}}</td>
      <td>
        <a routerLink="/register/{{poll.id}}">
          Register
        </a>
      </td>
      <td>
        <a routerLink="/vote/{{poll.id}}">
          Vote
        </a>
      </td>
      <td>
        <button mat-stroked-button (click)="delete(poll.id)">
          Delete
        </button>
      </td>
    </tr>
  </tbody>
</table>
<div *ngIf="!polls || polls.length === 0">
No polls found.
</div>
